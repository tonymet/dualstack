<!-- Code generated by gomarkdoc. DO NOT EDIT -->

[![Go Test](https://github.com/tonymet/dualstack/actions/workflows/go.yml/badge.svg)](https://github.com/tonymet/dualstack/actions/workflows/go.yml)
[![Go Reference](https://pkg.go.dev/badge/github.com/tonymet/dualstack.svg)](https://pkg.go.dev/github.com/tonymet/dualstack)

# multilistener

```go
import "github.com/tonymet/dualstack/multilistener"
```

Package multilistener \-\- listen to all loopback interfaces, or a mixed slice of ipv4 & ipv6 interfaces

go std library \(net.Listen\("tcp", ":8080"\)\) can listen to ALL interfaces but cannot listen to all local interfaces by default.

use multilistener.ListenLocalLoopback to return a single Listener for all ipv4 & ipv6 loopback interfaces

©️ 2025 Anthony Metzidis

## Index

- [type Addresses](<#Addresses>)
- [type MultiListener](<#MultiListener>)
  - [func NewLocalLoopback\(port string\) \(\*MultiListener, error\)](<#NewLocalLoopback>)
  - [func NewMultiListener\(addrs Addresses\) \(\*MultiListener, error\)](<#NewMultiListener>)
  - [func NewMultiListenerRaw\(listeners \[\]net.Listener\) \(\*MultiListener, error\)](<#NewMultiListenerRaw>)
  - [func \(dl \*MultiListener\) Accept\(\) \(net.Conn, error\)](<#MultiListener.Accept>)
  - [func \(dl \*MultiListener\) Addr\(\) net.Addr](<#MultiListener.Addr>)
  - [func \(dl \*MultiListener\) AllAddr\(\) net.Addr](<#MultiListener.AllAddr>)
  - [func \(dl \*MultiListener\) Close\(\) error](<#MultiListener.Close>)
  - [func \(dl \*MultiListener\) Network\(\) string](<#MultiListener.Network>)
  - [func \(dl \*MultiListener\) String\(\) string](<#MultiListener.String>)


<a name="Addresses"></a>
## type Addresses



```go
type Addresses = []string
```

<a name="MultiListener"></a>
## type MultiListener

MultiListener implements net.Listener interface

multiplexes multiple net.Listeners concurrently looping over Accept\(\)

```go
type MultiListener struct {
    // contains filtered or unexported fields
}
```

<a name="NewLocalLoopback"></a>
### func NewLocalLoopback

```go
func NewLocalLoopback(port string) (*MultiListener, error)
```

NewLocalLoopback returns Multilistener on ipv6 & ipv4 loopback addresses

ipv6 is the preferred address when Addr\(\) is called

<details><summary>Example</summary>
<p>

NewLocalLoopback when you want to listen to ipv6 & ipv4 loopback with one listener

```go
dual, err := NewLocalLoopback("8080")
if err != nil {
	panic(err)
}
defer dual.Close()
fmt.Printf("Serving HTTP %+v\n", dual.AllAddr())
fmt.Printf("Preferred Addr: %+v\n", dual.Addr())
go http.Serve(dual, nil)
// Output:
// Serving HTTP [::1]:8080,127.0.0.1:8080
// Preferred Addr: [::1]:8080
```

#### Output

```
Serving HTTP [::1]:8080,127.0.0.1:8080
Preferred Addr: [::1]:8080
```

</p>
</details>

<a name="NewMultiListener"></a>
### func NewMultiListener

```go
func NewMultiListener(addrs Addresses) (*MultiListener, error)
```

NewMultiListener returns multilistener over slice of \[\]string

see net.Dial and net.Listen for the string format of the address e.g. "\[::1\]:8080" for ipv6 and "127.0.0.1:8080" for ipv4

<a name="NewMultiListenerRaw"></a>
### func NewMultiListenerRaw

```go
func NewMultiListenerRaw(listeners []net.Listener) (*MultiListener, error)
```

NewMultiListenerRaw returns a MultiListener wrapper of multiple listeners

useful when raw net.Addr or net.Listener is needed

<a name="MultiListener.Accept"></a>
### func \(\*MultiListener\) Accept

```go
func (dl *MultiListener) Accept() (net.Conn, error)
```



<a name="MultiListener.Addr"></a>
### func \(\*MultiListener\) Addr

```go
func (dl *MultiListener) Addr() net.Addr
```

Addr returns the preferred \(first\) interface Addr

<a name="MultiListener.AllAddr"></a>
### func \(\*MultiListener\) AllAddr

```go
func (dl *MultiListener) AllAddr() net.Addr
```

AllAddr returns all the addresses, comma\-separated

NOTE: NOT A VALID IP ADDRESS . Use Addr\(\) for a valid address

<a name="MultiListener.Close"></a>
### func \(\*MultiListener\) Close

```go
func (dl *MultiListener) Close() error
```

Close closes all internal channels

safe to call multiple times. will return "already closed" if so

<a name="MultiListener.Network"></a>
### func \(\*MultiListener\) Network

```go
func (dl *MultiListener) Network() string
```

net.Addr.Network\(\) implementation

<a name="MultiListener.String"></a>
### func \(\*MultiListener\) String

```go
func (dl *MultiListener) String() string
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
